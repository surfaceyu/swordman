import{E as e}from"./index.889da779.js";import{E as a,a as s,b as t,h as l}from"./accountHttp.c85847ef.js";import"./el-form-item.e866842d.js";import{E as o,O as r,a as u}from"./messageApi.db12a57a.js";import{d,r as n,a as i,o as c,c as f,w as m,b as p,u as g,e as v,f as b,i as _}from"./index.d34c077d.js";const w=d({setup(d){const w=n(),y=i({account:"",pass:""}),h=i({account:[{validator:(e,a,s)=>{if(!a)return s(new Error("请输入账号"));s()},trigger:"blur"}],pass:[{validator:(e,a,s)=>{if(""===a)s(new Error("请输入密码"));else{if(!w.value)return;s()}},trigger:"blur"}]});return(d,n)=>{const i=o,x=a,j=e,V=_,k=s,E=t;return c(),f(E,{type:"flex",justify:"center",align:"middle",style:{height:"100%"}},{default:m((()=>[p(k,{ref_key:"ruleFormRef",ref:w,model:g(y),"status-icon":"",rules:g(h),"label-width":"20%",class:"demo-ruleForm",style:{"text-align":"center",position:"absolute"}},{default:m((()=>[p(x,{label:"账户",prop:"account"},{default:m((()=>[p(i,{modelValue:g(y).account,"onUpdate:modelValue":n[0]||(n[0]=e=>g(y).account=e),modelModifiers:{number:!0}},null,8,["modelValue"])])),_:1}),p(x,{label:"密码",prop:"pass"},{default:m((()=>[p(i,{modelValue:g(y).pass,"onUpdate:modelValue":n[1]||(n[1]=e=>g(y).pass=e),type:"password","show-password":"",autocomplete:"off"},null,8,["modelValue"])])),_:1}),p(x,null,{default:m((()=>[p(j,{type:"primary",onClick:n[2]||(n[2]=e=>{var a;(a=w.value)&&a.validate((async e=>{if(!e)return!1;{const e=await l.Post("/auth/login",{Account:y.account,Passwd:y.pass},!1);e&&200==e.code&&(localStorage.setItem("token",e.token),b({url:"../server/index"}),r()),e&&401==e.status&&u()}}))})},{default:m((()=>[v("登录")])),_:1}),p(j,{onClick:n[3]||(n[3]=e=>{var a;(a=w.value)&&a.resetFields()})},{default:m((()=>[v("重置")])),_:1})])),_:1}),p(x,null,{default:m((()=>[p(V,{url:"../register/index","hover-class":"navigator-hover"},{default:m((()=>[v(" 没有账号？先去注册 ")])),_:1})])),_:1})])),_:1},8,["model","rules"])])),_:1})}}});export{w as default};
